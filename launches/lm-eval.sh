#!/bin/bash
# download https://github.com/EleutherAI/lm-evaluation-harness and run in lm-evaluation-harness directory

# source ~/anaconda3/bin/activate lm-evaluation-harness
source /admin/home-laura/venvs/venv-lm-evaluation-harness/bin/activate

accelerate launch -m lm_eval --model hf --model_args pretrained=lomahony/pythia-2.8b-helpful-sfted0-dpo-3epochs,revision=epoch1-96000 --tasks lambada_openai,hellaswag,arc_easy,arc_challenge,wikitext,winogrande,piqa,boolq,openbookqa,sciq --num_fewshot 0 --batch_size 16 --output_path files/model_evals/pythia-2.8b-helpful-sfted0-dpo-3epochs-ep1-0shot &> files/model_evals/pythia-2.8b-helpful-sfted0-dpo-3epochs-ep1-0shot-shelloutput.txt 
accelerate launch -m lm_eval --model hf --model_args pretrained=lomahony/pythia-2.8b-helpful-sfted0-dpo-3epochs,revision=epoch1-96000 --tasks lambada_openai,hellaswag,arc_easy,arc_challenge,wikitext,winogrande,piqa,boolq,openbookqa,sciq --num_fewshot 5 --batch_size 16 --output_path files/model_evals/pythia-2.8b-helpful-sfted0-dpo-3epochs-ep1-5shot &> files/model_evals/pythia-2.8b-helpful-sfted0-dpo-3epochs-ep1-5shot-shelloutput.txt 
accelerate launch -m lm_eval --model hf --model_args pretrained=lomahony/pythia-2.8b-helpful-sfted0-dpo-3epochs,revision=epoch2-192000 --tasks lambada_openai,hellaswag,arc_easy,arc_challenge,wikitext,winogrande,piqa,boolq,openbookqa,sciq --num_fewshot 0 --batch_size 16 --output_path files/model_evals/pythia-2.8b-helpful-sfted0-dpo-3epochs-ep2-0shot &> files/model_evals/pythia-2.8b-helpful-sfted0-dpo-3epochs-ep2-0shot-shelloutput.txt 
accelerate launch -m lm_eval --model hf --model_args pretrained=lomahony/pythia-2.8b-helpful-sfted0-dpo-3epochs,revision=epoch2-192000 --tasks lambada_openai,hellaswag,arc_easy,arc_challenge,wikitext,winogrande,piqa,boolq,openbookqa,sciq --num_fewshot 5 --batch_size 16 --output_path files/model_evals/pythia-2.8b-helpful-sfted0-dpo-3epochs-ep2-5shot &> files/model_evals/pythia-2.8b-helpful-sfted0-dpo-3epochs-ep2-5shot-shelloutput.txt 
accelerate launch -m lm_eval --model hf --model_args pretrained=lomahony/pythia-2.8b-helpful-sfted0-dpo-3epochs,revision=epoch2-228000 --tasks lambada_openai,hellaswag,arc_easy,arc_challenge,wikitext,winogrande,piqa,boolq,openbookqa,sciq --num_fewshot 0 --batch_size 16 --output_path files/model_evals/pythia-2.8b-helpful-sfted0-dpo-3epochs-end-0shot &> files/model_evals/pythia-2.8b-helpful-sfted0-dpo-3epochs-end-0shot-shelloutput.txt 
accelerate launch -m lm_eval --model hf --model_args pretrained=lomahony/pythia-2.8b-helpful-sfted0-dpo-3epochs,revision=epoch2-228000 --tasks lambada_openai,hellaswag,arc_easy,arc_challenge,wikitext,winogrande,piqa,boolq,openbookqa,sciq --num_fewshot 5 --batch_size 16 --output_path files/model_evals/pythia-2.8b-helpful-sfted0-dpo-3epochs-end-5shot &> files/model_evals/pythia-2.8b-helpful-sfted0-dpo-3epochs-end-5shot-shelloutput.txt 


# accelerate launch main.py --model hf --model_args pretrained=lomahony/eleuther-pythia2.8b-hh-dpo --tasks lambada_openai,hellaswag,arc_easy,arc_challenge,wikitext,winogrande,piqa,boolq,openbookqa,sciq --num_fewshot 0 --batch_size 16 --output_path ~/direct-preference-optimization/model_eval_files/dpo-pythia-2.8b-0shot > ~/direct-preference-optimization/model_eval_files/dpo-pythia-2.8b-0shot-shelloutput.txt 
# accelerate launch main.py --model hf --model_args pretrained=lomahony/eleuther-pythia2.8b-hh-sft --tasks lambada_openai,hellaswag,arc_easy,arc_challenge,wikitext,winogrande,piqa,boolq,openbookqa,sciq --num_fewshot 5 --batch_size 16 --output_path ~/direct-preference-optimization/model_eval_files/dpo-pythia-2.8b-5shot > ~/direct-preference-optimization/model_eval_files/dpo-pythia-2.8b-5shot-shelloutput.txt 

# accelerate launch main.py --model hf --model_args pretrained=lomahony/eleuther-pythia6.9b-hh-sft --tasks lambada_openai,hellaswag,arc_easy,arc_challenge,wikitext,winogrande,piqa,boolq,openbookqa,sciq --num_fewshot 0 --batch_size 16 --output_path ~/direct-preference-optimization/model_eval_files/sft-pythia-6.9b-0shot > ~/direct-preference-optimization/model_eval_files/sft-pythia-6.9b-0shot-shelloutput.txt 
# accelerate launch main.py --model hf --model_args pretrained=lomahony/eleuther-pythia6.9b-hh-sft --tasks lambada_openai,hellaswag,arc_easy,arc_challenge,wikitext,winogrande,piqa,boolq,openbookqa,sciq --num_fewshot 5 --batch_size 16 --output_path ~/direct-preference-optimization/model_eval_files/sft-pythia-6.9b-5shot > ~/direct-preference-optimization/model_eval_files/sft-pythia-6.9b-5shot-shelloutput.txt 
# accelerate launch main.py --model hf --model_args pretrained=lomahony/eleuther-pythia6.9b-hh-dpo --tasks lambada_openai,hellaswag,arc_easy,arc_challenge,wikitext,winogrande,piqa,boolq,openbookqa,sciq --num_fewshot 0 --batch_size 16 --output_path ~/direct-preference-optimization/model_eval_files/dpo-pythia-6.9b-0shot > ~/direct-preference-optimization/model_eval_files/dpo-pythia-6.9b-0shot-shelloutput.txt 
# accelerate launch main.py --model hf --model_args pretrained=lomahony/eleuther-pythia6.9b-hh-dpo --tasks lambada_openai,hellaswag,arc_easy,arc_challenge,wikitext,winogrande,piqa,boolq,openbookqa,sciq --num_fewshot 5 --batch_size 16 --output_path ~/direct-preference-optimization/model_eval_files/dpo-pythia-6.9b-5shot > ~/direct-preference-optimization/model_eval_files/dpo-pythia-6.9b-5shot-shelloutput.txt 

# python main.py --model hf --model_args pretrained=lomahony/eleuther-pythia12b-hh-sft,parallelize=True --tasks lambada_openai,hellaswag,arc_easy,arc_challenge,wikitext,winogrande,piqa,boolq,openbookqa,sciq --num_fewshot 0 --batch_size 16 --output_path ~/direct-preference-optimization/model_eval_files/sft-pythia-12b-0shot > ~/direct-preference-optimization/model_eval_files/sft-pythia-12b-0shot-shelloutput.txt 
# python main.py --model hf --model_args pretrained=lomahony/eleuther-pythia12b-hh-sft,parallelize=True --tasks lambada_openai,hellaswag,arc_easy,arc_challenge,wikitext,winogrande,piqa,boolq,openbookqa,sciq --num_fewshot 5 --batch_size 8 --output_path ~/direct-preference-optimization/model_eval_files/sft-pythia-12b-5shot > ~/direct-preference-optimization/model_eval_files/sft-pythia-12b-5shot-shelloutput.txt 
# python main.py --model hf --model_args pretrained=lomahony/eleuther-pythia12b-hh-dpo,parallelize=True --tasks lambada_openai,hellaswag,arc_easy,arc_challenge,wikitext,winogrande,piqa,boolq,openbookqa,sciq --num_fewshot 0 --batch_size 16 --output_path ~/direct-preference-optimization/model_eval_files/dpo-pythia-12b-0shot > ~/direct-preference-optimization/model_eval_files/dpo-pythia-12b-0shot-shelloutput.txt 
# python main.py --model hf --model_args pretrained=lomahony/eleuther-pythia12b-hh-dpo,parallelize=True --tasks lambada_openai,hellaswag,arc_easy,arc_challenge,wikitext,winogrande,piqa,boolq,openbookqa,sciq --num_fewshot 5 --batch_size 8 --output_path ~/direct-preference-optimization/model_eval_files/dpo-pythia-12b-5shot > ~/direct-preference-optimization/model_eval_files/dpo-pythia-12b-5shot-shelloutput.txt 

# base models 
# accelerate launch main.py --model hf --model_args pretrained=EleutherAI/pythia-2.8b --tasks lambada_openai,hellaswag,arc_easy,arc_challenge,wikitext,winogrande,piqa,boolq,openbookqa,sciq --num_fewshot 0 --batch_size 16 --output_path ~/direct-preference-optimization/model_eval_files/EleutherAI-pythia-2.8b-0shot > ~/direct-preference-optimization/model_eval_files/EleutherAI-pythia-2.8b-0shot-shelloutput.txt 
# accelerate launch main.py --model hf --model_args pretrained=EleutherAI/pythia-2.8b --tasks lambada_openai,hellaswag,arc_easy,arc_challenge,wikitext,winogrande,piqa,boolq,openbookqa,sciq --num_fewshot 5 --batch_size 16 --output_path ~/direct-preference-optimization/model_eval_files/EleutherAI-pythia-2.8b-5shot > ~/direct-preference-optimization/model_eval_files/EleutherAI-pythia-2.8b-5shot-shelloutput.txt 

# accelerate launch main.py --model hf --model_args pretrained=EleutherAI/pythia-6.9b --tasks lambada_openai,hellaswag,arc_easy,arc_challenge,wikitext,winogrande,piqa,boolq,openbookqa,sciq --num_fewshot 0 --batch_size 16 --output_path ~/direct-preference-optimization/model_eval_files/EleutherAI-pythia-6.9b-0shot > ~/direct-preference-optimization/model_eval_files/EleutherAI-pythia-6.9b-0shot-shelloutput.txt 
# accelerate launch main.py --model hf --model_args pretrained=EleutherAI/pythia-6.9b --tasks lambada_openai,hellaswag,arc_easy,arc_challenge,wikitext,winogrande,piqa,boolq,openbookqa,sciq --num_fewshot 5 --batch_size 16 --output_path ~/direct-preference-optimization/model_eval_files/EleutherAI-pythia-6.9b-5shot > ~/direct-preference-optimization/model_eval_files/EleutherAI-pythia-6.9b-5shot-shelloutput.txt 

# accelerate launch main.py --model hf --model_args pretrained=EleutherAI/pythia-12b --tasks lambada_openai,hellaswag,arc_easy,arc_challenge,wikitext,winogrande,piqa,boolq,openbookqa,sciq --num_fewshot 0 --batch_size 16 --output_path ~/direct-preference-optimization/model_eval_files/EleutherAI-pythia-12b-0shot > ~/direct-preference-optimization/model_eval_files/EleutherAI-pythia-12b-0shot-shelloutput.txt 
# accelerate launch main.py --model hf --model_args pretrained=EleutherAI/pythia-12b --tasks lambada_openai,hellaswag,arc_easy,arc_challenge,wikitext,winogrande,piqa,boolq,openbookqa,sciq --num_fewshot 5 --batch_size 16 --output_path ~/direct-preference-optimization/model_eval_files/EleutherAI-pythia-12b-5shot > ~/direct-preference-optimization/model_eval_files/EleutherAI-pythia-12b-5shot-shelloutput.txt 